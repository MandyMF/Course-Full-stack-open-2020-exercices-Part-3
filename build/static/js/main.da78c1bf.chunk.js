(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,n,t){e.exports=t(38)},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(15),c=t.n(o),u=t(5),l=t(3),i=t(2),s=function(e){var n=e.name,t=e.number,a=e.handlerDeletePerson;Object(i.a)(e,["name","number","handlerDeletePerson"]);return r.a.createElement("p",null,n," ",t," ",r.a.createElement("button",{onClick:function(){return a()}},"delete"))},m=function(e){var n=e.persons,t=e.filter,a=e.handlerDeletePerson;Object(i.a)(e,["persons","filter","handlerDeletePerson"]);return r.a.createElement(r.a.Fragment,null,n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){return r.a.createElement(s,{key:e.id,name:e.name,number:e.number,handlerDeletePerson:function(){return a(e.id,e.name)}})})))},f=function(e){var n=e.onSubmit,t=e.newName,a=e.newNumber,o=e.handleNewNameChange,c=e.handleNewNumberChange;Object(i.a)(e,["onSubmit","newName","newNumber","handleNewNameChange","handleNewNumberChange"]);return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:o}),r.a.createElement("br",null),"number: ",r.a.createElement("input",{value:a,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},d=function(e){var n=e.filter,t=e.handleFilterChange;Object(i.a)(e,["filter","handleFilterChange"]);return r.a.createElement(r.a.Fragment,null,"filter shown with",r.a.createElement("input",{value:n,onChange:t}))},h={success:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},error:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},b=function(e){var n=e.message;Object(i.a)(e,["message"]);return n?r.a.createElement("div",{style:n.success?h.success:h.error},n.info):null},p=t(4),g=t.n(p),E=function(){return g.a.get("/api/persons").then((function(e){return e.data}))},w=function(e){return g.a.post("/api/persons",e).then((function(e){return e.data}))},v=function(e){return g.a.delete("".concat("/api/persons","/").concat(e)).then((function(e){return e.data}))},N=function(e,n){return g.a.put("".concat("/api/persons","/").concat(e),n).then((function(e){return e.data}))},j=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),s=i[0],h=i[1],p=Object(a.useState)(""),g=Object(l.a)(p,2),j=g[0],O=g[1],C=Object(a.useState)(""),S=Object(l.a)(C,2),k=S[0],y=S[1],D=Object(a.useState)(null),P=Object(l.a)(D,2),F=P[0],T=P[1];Object(a.useEffect)((function(){E().then((function(e){o(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(b,{message:F}),r.a.createElement(d,{filter:k,handleFilterChange:function(e){y(e.target.value)}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(f,{onSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===s}));if(n){if(window.confirm("".concat(s," is already added to phonebook, replace the old number with the new one?"))){var a=Object(u.a)(Object(u.a)({},n),{},{number:j});N(n.id,a).then((function(e){o(t.map((function(n){return n.id!==e.id?n:e}))),h(""),O(""),T({success:!0,info:"Number of ".concat(e.name," changed to ").concat(j)}),setTimeout((function(){return T(null)}),5e3)})).catch((function(e){T({info:e.response.data.error,success:!1})}))}}else w({name:s,number:j}).then((function(e){o(t.concat(e)),h(""),O(""),T({success:!0,info:"Added ".concat(e.name)}),setTimeout((function(){return T(null)}),5e3)})).catch((function(e){T({info:e.response.data.error,success:!1})}))},newName:s,newNumber:j,handleNewNameChange:function(e){h(e.target.value)},handleNewNumberChange:function(e){O(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(m,{handlerDeletePerson:function(e,n){window.confirm("Delete ".concat(n," ?"))&&v(e).then((function(){o(t.filter((function(n){return n.id!==e}))),T({success:!0,info:"Deleted ".concat(n)}),setTimeout((function(){return T(null)}),5e3)})).catch((function(a){o(t.filter((function(n){return n.id!==e}))),T({success:!1,info:"Information of ".concat(n," has already been removed from the server")}),setTimeout((function(){return T(null)}),5e3)}))},persons:t,filter:k}))};c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.da78c1bf.chunk.js.map